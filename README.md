# gulp-template

<p>Базовый шаблон для сборки и тестирования Web-вёрстки на стеке Node.js + Gulp + Pug + Sass по технологии <b>mobile&#8209;first</b>.</p>
<p>В шаблон включены: автоматизация, шаблонизация, препроцессинг HTML, CSS, постпроцессинг, сжатие изображений для вёрски сайтов с учётом масштабируемости проектов.</p>
<h2>Структура проекта</h2>
<p>Оснавная структура состоит из трёх папок:</p>
<ol>
  <li><code>src</code> - исходный код на PUG, SASS др.;</li>
  <li><code>dev-build</code> - рабочий код сборки HTML, CSS, JS;</li>
  <li><code>build</code> - финальная сборка в HTML, CSS и JS с автопрефиксами.</li>
</ol>
<p>Таким обраозом, финальная сборка попадёт в папку <code>build</code>.</p>
<p><strong>Служебные файлы</strong></p>
<p>Чтобы выполнить сборку проекта понадобится node.js и конфигурационные файлы из корневого каталога проекта и папки gulp/tasks</p>
<p>Если node.js установлен, зависимости, необходимые для работы с исходными фалйами, устанавливаются с помощью вызова <code>npm i</code> в корневом каталоге, в консоли.</p>
<p><strong>Задачи:</strong></p>
<ul>
  <li><code>gulp construction</code>,</li>
  <li><code>gulp build</code></li>
</ul>
<p>нужны для отслеживания изменений в <code>dev-build</code> и для финальной сборки проекта в <code>build</code> соответственно.</p>
<p>Проект построен по принципу БЭМ + Sass. Файловая структура построена по принципу БЭМ, но без дополнительных катологов для элементов и модификаторов блоков с целью упрощения дерева файловой системы. Cледуя принципам БЭМ, отсутствует деление на технологии реализации блоков. Файлы sass, js, изображения и т.д. находятся внутри папок блоков, а адаптивные медиа-запросы не вынесены в отдельные бандлы на уровне переопределения, а находятся в sass файлах блоков с целью обеспечения удобства доступа для разработчиков. Переопределение изначально осуществляется на уровне общего (common) уровня и уровня разных страниц из папки <code>pages</code>.</p>
<p><strong>Структура каталога <code>src</code>:</strong></p>
<ul>
  <li>повторяет структуру сайта в подкаталоге <code>pages</code> по технологии БЭМ,</li>
  <li>содержит общие стили в папке <code>common</code>,</li>
  <li>в папке <code>thirdparty</code> содержит файлы сторонних разработчиков,</li>
  <li>а сам <code>src</code> содержит сборочные файлы общих стилей, структуру и стилей отдельных html страниц.</li>
</ul>
<p>В текущей реализации сборочные файлы страниц и их стилей находятся в корневом каталоге <code>src</code>. При сборке игнорируется на выходе сам по себе файл <code>common.pug</code>, отвечающий за общую базовую структуру html. Он участвует только в сборке конкретных страниц, являясь шабоном.</p>
<p>Внутри каталогов <code>includes</code> находятся фрагменты кода и файлы, которые не экспортируются в <code>build</code> и <code>dev-build</code> напрямую, но подключаются к структуре и стилям родительских документов, либо используются для преобразования в другие форматы.</p>
<p><strong>Подзадачи:</strong></p>
<p>В проекте используется масса подзадач, среди которых можно отметить:</p>
<ul>
  <li>Сжатие изображений;<br>
    <ul>
      <li>Все изображения в <code>src</code> кроме папок <code>includes</code> Автоматически обрабатываются <code>gulp construction</code> и <code>gulp build</code> и попадут в папку <code>img</code> в сжатом виде в подкаталог, соответствующий положений в файловой системе относительно <code>src</code>.</li>
    </ul>
  </li>
    
  <li>Создание svg-спрайтов;<br>
    <ul>
      <li>Опционально, поместив в папку <code>src/common/includes/svg-sprite-shapes</code> svg-файлы, с помощью задач <code>gulp build</code>, <code>gulp construction</code> и <code>gulp makeSvgSymbolSprite</code> можно получить svg-спрайт на основе тегов symbol.</li>
      <li>Готовый спрайт появится в папке <code>./src/common/svg-sprite/</code>, откуда переместится в соответствующую типу сборки папку + <code>img/commmon/svg-sprite/</code>.</li>
    </ul>
  </li>
  <li>Помимо того в проекте используется browsersync сервер, для динамического отображения изменений в сборках на разных устройствах, раличные улучшения финального кодстайла, автопрефиксеры, и что важно отметить <b>сортировка медиазапросов стилей по технологии mobile-first</b>.</li>
</ul>
<p>Всё это можно настроить и изменить в соответствующих конфигурационных файлах задач, снабжённых достаточно подробными комментариями.</p>